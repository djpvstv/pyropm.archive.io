
<!DOCTYPE html>

<html lang = "en">
    <head>
        <title>Menu Editing Guide - PyroPM</title>
        <meta charset = "utf-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1">
        <meta property = "og:title" content = "PyroPM"/>
        <meta property = "og:description" content = "Menu Editing Guide"/>
        <meta property = "og:image" content = "https://pyropm.github.io/assets/PyroPM_Logo.png"/>
        <link rel = "shortcut icon" href = "https://pyropm.github.io/assets/icon.png"/>
        <link rel = "stylesheet" href = "https://pyropm.github.io/styles.css">
    </head>
    <body>
        <div class = "button">
            <a href = "https://pyropm.github.io"><img src = "https://pyropm.github.io/assets/PyroPM_Logo.png" alt = "logo" width = "200"></a>
            <b href = "https://pyropm.github.io/content.html">CONTENT</b>
            <a href = "https://pyropm.github.io/contact.html">CONTACT</a>
        </div>
        <div class = "header"></div>
        <div class = "sub_button">
            <c></c>
            <a href = "https://pyropm.github.io/content.html">ALL</a>
            <a href = "https://pyropm.github.io/content/builds.html">BUILDS</a>
            <a href = "https://pyropm.github.io/content/characters.html">CHARACTERS</a>
            <a href = "https://pyropm.github.io/content/stages.html">STAGES</a>
            <b href = "https://pyropm.github.io/content/menus.html">MENUS</b>
        </div>
        <div class = "sub_header"></div>
        <div class = "body">
            <div class = "post">
                <h1>
                    Changing the Layout
                </h1>
                <p>
                    Now for the more difficult stuff.<br>
                    The location of each button is controlled by bone position in the animations. The initial location is found on frame 10 of MenMainIconXXXX_TopN__0, controlled by the bone rotN.<br>
                    The location, if updated, needs to be copied from the first animation to the other animations, in these spots:
                </p><p style = "font-weight: bold; line-height: 1.4;">
                    First frame of MenMainIconXXXX_TopN__1<br>
                    Last frame of MenMainIconXXXX_TopN__2<br>
                    First frame of MenMainIconXXXX_TopN__3<br>
                    First frame of MenMainIconXXXX_TopN__4*<br>
                    First frame of MenMainIconXXXX_TopN__5
                </p>
                <h2 style = "font-family: Modern Sans Light; font-size: 75%;">*Note, if you are editing the scale of the button by bone instead of the mesh itself, be aware that there is likely a few additional keyframes after frame one controlling scale.</h2>
                <p>
                    This allows you to change the locations of the buttons, but not the function of them. For example, by default pressing down on the VS button will make the cursor move to the Online button. This behavior will not change until we start messing with stuff. Start by opening sora_main_menu.rel in HxD. Depending on what sub menu you are editing, you need to jump to certain memory addresses in the file, listed in the table on the bottom of the page.<br>
                    Each button is a full 16 byte pairs of data, every 4 pairs representing a direction:
                </p><p style = "font-weight: bold; line-height: 1.4;">
                    First 4 - Up<br>
                    Second 4 - Down<br>
                    Third 4 - Left<br>
                    Last 4 - Right
                </p><p>
                    In every 4 byte pairs, what we want to focus our attention to is the second pair. This controls what button the cursor is moved to whenever you press that direction.<br><br>
                    For example, this is the line of byte pair representing the Vault button on the main menu.<br>
                    <img src = "https://lh3.googleusercontent.com/7mz5Rw3OM8SYQ5QFaCY7g__z6Q5lHrgkWwjQUVG0GgRlkLOEzUamFVaDMeXTllM8qbvGsVPE3KZCsNniQv_lwi82aTLJzEbmI2u3QyaT4tWTUOmwSdL_bGKL0RE-ecYMqWXA5QMU" alt = "example"><br>
                    Currently, pressing up while this button is highlighted will move to the Fight button. To find this out, I looked at the first 4 byte pairs. The second of these 4 pairs has 00, and after looking at the table for the main menu I found that this represents the Fight button.<br>
                    <img src = "https://lh3.googleusercontent.com/OL8u_qjVpvuZY6-KR3nvfIoo32119mnY8OxflxrLLvKi-B_6lktzyQtPFgFKJg-XUYPmr8vQPsr2XBmitcYXZNeyv-QJZlGx2y54fRweSdTatdABLmimWxozODslVOYlVhQhFXl5" alt = "example"><br>
                    Following this method we can deduce that pressing down moves the cursor to the Fight button, left to Online, and right to Options.
                </p><p style = "font-size: 150%; font-weight: bold;">
                    Example
                </p>
                <p>
                    As a demonstration, let’s modify the movements of the Special Versus button so that when the player presses down the cursor moves to the Names button.<br><br>
                    First, let’s find the correct memory address in the table. For our example, the Special Versus button has an address of 40994 - 409A3. So let’s jump to there and highlight our range.<br>
                    <img src = "https://lh5.googleusercontent.com/-quvpgSE8taOS-hTr3BkOB-Pap9HuKLDDk24uQCb15F2cSnAn6OPiukQYoSs1OXO-pPAU53jhdT6HhmYoHQHQWwJM3iBcg72zA1Nanps8nQMunkmwYx3jv090YSQGROXQ5AzIv4W" alt = "example"><br>
                    Now since we want to edit the movement whenever the player presses down, we need to look at the second 4 byte pairs.<br>
                    <img src = "https://lh5.googleusercontent.com/-quvpgSE8taOS-hTr3BkOB-Pap9HuKLDDk24uQCb15F2cSnAn6OPiukQYoSs1OXO-pPAU53jhdT6HhmYoHQHQWwJM3iBcg72zA1Nanps8nQMunkmwYx3jv090YSQGROXQ5AzIv4W" alt = "example"><br>
                    Currently when pressing down the cursor moves to button 02, which the table tells us is the Tourney/Codes button. We want it to move to the names button, which is number 05. So updating the number looks like this:<br>
                    <img src = "https://lh5.googleusercontent.com/AEKBRsfprYKBPz9PWem85ORV_9t1ktOROYM3lez2cVXprTQ1PpfrT53JRYAnMZSSwzklOoDq9JZUo5S689_pvx63W5N3SSi9wV3b3gvgrZI3ZQOl-e8OnQlX5wzPe5145VLEZfon" alt = "example"><br>
                    Now let’s save and try it out. If all went smoothly, pressing down while the Special Versus button is selected moves the cursor down to the Names button.
                </p>
            </div>
        </div>
    </body>
</html>
